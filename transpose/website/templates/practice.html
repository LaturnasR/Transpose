{% extends "layout.html" %}
{% block content %}

<div id="correct" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModal" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
          <div class="modal-header">
              <h5 id="myModalLabel"class="modal-title text-success">You got the correct answer! <i class="fa-solid fa-circle-check"></i></h5>
          </div>
          <div class="modal-body">
              <p>
                ...
              </p>

          </div>
      </div>
  </div>
</div>

<div id="incorrect" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModal" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
          <div class="modal-header">
              <h5 id="myModalLabel"class="modal-title text-danger">Your answer is incorrect! <i class="fa-solid fa-circle-xmark"></i></h5>
          </div>
          <div class="modal-body">
              <p id="correct_answer">
                
              </p>

          </div>
      </div>
  </div>
</div>

<div id="solution" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModal" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
          <div class="modal-header">
              <h5 id="myModalLabel"class="modal-title">Question Number</h5>
          </div>
          <div class="modal-body">
              <p>
                Solution
              </p>

          </div>
      </div>
  </div>
</div>

<section id="home-section">
  <section id="practice-section" class="page-section section-bg rounded pb-2">
    <div class="container" data-aos="fade-up">
      <div class="section-title">
        <h2>Practice</h2>
        <p>Listed in each selection are different variations of sample problems. Try to translate these
          problems into their equivalent expressions and see if you got the right answer. This will help you familiarize yourself with the 'keywords' and their effect on the sentences or phrases.</p>
      </div>
      

      <ul class="nav nav-pills justify-content-center mb-3" id="pills-tab" role="tablist" style="--bs-nav-link-color: #47b2e4; --bs-nav-pills-link-active-bg: #47b2e4">
        <li class="nav-item" role="presentation">
          <button class="nav-link active fw-semibold mx-2" id="pills-addition-tab" data-bs-toggle="pill" data-bs-target="#pills-addition" type="button" role="tab" aria-controls="pills-addition" aria-selected="true">Addition <i class="fa-solid fa-plus"></i></button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link fw-semibold mx-2" id="pills-subtraction-tab" style="--bs-nav-link-color: #47b2e4" data-bs-toggle="pill" data-bs-target="#pills-subtraction" type="button" role="tab" aria-controls="pills-subtraction" aria-selected="false">Subtraction <i class="fa-solid fa-minus"></i></button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link fw-semibold mx-2" id="pills-multiplication-tab" style="--bs-nav-link-color: #47b2e4" data-bs-toggle="pill" data-bs-target="#pills-multiplication" type="button" role="tab" aria-controls="pills-multiplication" aria-selected="false">Multiplication <i class="fa-solid fa-xmark"></i></button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link fw-semibold mx-2" id="pills-division-tab" style="--bs-nav-link-color: #47b2e4" data-bs-toggle="pill" data-bs-target="#pills-division" type="button" role="tab" aria-controls="pills-division" aria-selected="false">Division <i class="fa-solid fa-divide"></i></button>
        </li>
      </ul>
      <div class="tab-content" id="pills-tabContent">
        <!-- Addition problems -->
        <div class="tab-pane fade show active" id="pills-addition" role="tabpanel" aria-labelledby="pills-addition-tab" tabindex="0">
          <div class="div_content" id="addition">
            <br>
            <div class="table-responsive section-bg px-3 pb-0 rounded align-middle" >
              <table class="table table-borderless border-secondary fs-6">
                <thead>
                  <tr>
                    <th style="width:20%;" scope="col" >Problem</th>
                    <th style="width:20%; text-align: center;" scope="col">Answer</th>
                    <th class="action" scope="col">Action</th>
                  </tr>
                </thead>
                <tbody id="addProblems"> </tbody>
              </table>
            </div>
          </div>
        </div>
        <!-- Subtraction problems -->
        <div class="tab-pane fade" id="pills-subtraction" role="tabpanel" aria-labelledby="pills-subtraction-tab" tabindex="0">
          <div class="div_content" id="subtraction">
            <br>
            <div class="table-responsive section-bg px-3 pb-0 rounded align-middle" >
              <table class="table table-borderless border-secondary fs-6">
                <thead>
                  <tr>
                    <th style="width:20%;" scope="col" >Problem</th>
                    <th style="width:20%; text-align: center;" scope="col">Answer</th>
                    <th class="action" scope="col">Action</th>
                  </tr>
                </thead>
                <tbody id="subProblems"> </tbody>
              </table>
            </div>
          </div>
        </div>
        <!-- Multiplication problems -->
        <div class="tab-pane fade" id="pills-multiplication" role="tabpanel" aria-labelledby="pills-multiplication-tab" tabindex="0">
          <div class="div_content" id="multiplication">
            <br>
            <div class="table-responsive section-bg px-3 pb-0 rounded align-middle" >
              <table class="table table-borderless border-secondary fs-6">
                <thead>
                  <tr>
                    <th style="width:20%;" scope="col" >Problem</th>
                    <th style="width:20%; text-align: center;" scope="col">Answer</th>
                    <th class="action" scope="col">Action</th>
                  </tr>
                </thead>
                <tbody id="mulProblems"> </tbody>
              </table>
            </div>
          </div>
        </div>
        <!-- Division problems -->
        <div class="tab-pane fade" id="pills-division" role="tabpanel" aria-labelledby="pills-division-tab" tabindex="0">
          <div class="div_content" id="division">
            <br>
            <div class="table-responsive section-bg px-3 pb-0 rounded align-middle" >
              <table class="table table-borderless border-secondary fs-6">
                <thead>
                  <tr>
                    <th style="width:20%;" scope="col" >Problem</th>
                    <th style="width:20%; text-align: center;" scope="col">Answer</th>
                    <th class="action" scope="col">Action</th>
                  </tr>
                </thead>
                <tbody id="divProblems"> </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

    </div>
  </section>
</section><!-- End Learn Section -->

  


<!-- jQuery -->
<script>
  $("#practice").removeAttr("href");
  $("#practice").css("color", "#64b3f4");
  $("#practice").addClass("fw-semibold");
</script>

<script 
  src="https://code.jquery.com/jquery-3.6.1.min.js" 
  integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="
  crossorigin="anonymous">
</script>

<!-- custom js, needs jQuery on top -->
<script src="static/js/bar_loader.js"></script>

<script>


function checkAddAns(problemNumber) {
  if ($("#add-ans-"+problemNumber).val() == ""){
    alert("Please type in your answer first.");
  }
  else{
    if ($("#add-btn-"+problemNumber).html() == "Check"){
      if ($("#add-ans-"+problemNumber).val().replace(/\s/g,'').replace(/([a-z])/g, "x") == addProblems[problemNumber].ans[0] || 
          $("#add-ans-"+problemNumber).val().replace(/\s/g,'').replace(/([a-z])/g, "x") == addProblems[problemNumber].ans[1] ||
          $("#add-ans-"+problemNumber).val().replace(/\s/g,'').replace(/([a-z])/g, "x") == addProblems[problemNumber].ans[2]){
        $(document).ready(function(){
          $("#correct").modal('show');
      });
      }
      else{
        $(document).ready(function(){
          $("#incorrect").modal('show');
          $("#correct_answer").html("The correct answer is: " +addProblems[problemNumber].display_ans[0]);
      });;
      }
      $("#add-btn-"+problemNumber).html("Solution");
      $("#add-ans-"+problemNumber).css('color', 'gray');
      $("#add-ans-"+problemNumber).attr("disabled", "");
    }
    else{
      $(document).ready(function(){
          $("#solution").modal('show');
      });
    }
  }
}

function checkSubAns(problemNumber) {
  if ($("#sub-ans-"+problemNumber).val() == ""){
    alert("Please type in your answer first.");
  }
  else{
    if ($("#sub-btn-"+problemNumber).html() == "Check"){
      if ($("#sub-ans-"+problemNumber).val().replace(/\s/g,'').replace(/([a-z])/g, "x") == subProblems[problemNumber].ans[0] || 
          $("#sub-ans-"+problemNumber).val().replace(/\s/g,'').replace(/([a-z])/g, "x") == subProblems[problemNumber].ans[1] ||
          $("#sub-ans-"+problemNumber).val().replace(/\s/g,'').replace(/([a-z])/g, "x") == subProblems[problemNumber].ans[2]){
        $(document).ready(function(){
          $("#correct").modal('show');
      });
      }
      else{
        $(document).ready(function(){
          $("#incorrect").modal('show');
          $("#correct_answer").html("The correct answer is: " +subProblems[problemNumber].display_ans[0]);
      });;
      }
      $("#sub-btn-"+problemNumber).html("Solution");
      $("#sub-ans-"+problemNumber).css('color', 'gray');
      $("#sub-ans-"+problemNumber).attr("disabled", "");
    }
    else{
      $(document).ready(function(){
        $("#solution").modal('show');
      });
    }
  }
}

function checkMulAns(problemNumber) {
  if ($("#mul-ans-"+problemNumber).val() == ""){
    alert("Please type in your answer first.");
  }
  else{
    if ($("#mul-btn-"+problemNumber).html() == "Check"){
      if ($("#mul-ans-"+problemNumber).val().replace(/\s/g,'').replace(/([a-z])/g, "x") == mulProblems[problemNumber].ans[0] || 
          $("#mul-ans-"+problemNumber).val().replace(/\s/g,'').replace(/([a-z])/g, "x") == mulProblems[problemNumber].ans[1] ||
          $("#mul-ans-"+problemNumber).val().replace(/\s/g,'').replace(/([a-z])/g, "x") == mulProblems[problemNumber].ans[2]){
        $(document).ready(function(){
          $("#correct").modal('show');
      });
      }
      else{
        $(document).ready(function(){
          $("#incorrect").modal('show');
          $("#correct_answer").html("The correct answer is: " +mulProblems[problemNumber].display_ans[0]);
      });
      }
      $("#mul-btn-"+problemNumber).html("Solution");
      $("#mul-ans-"+problemNumber).css('color', 'gray');
      $("#mul-ans-"+problemNumber).attr("disabled", "");
    }
    else{
      $(document).ready(function(){
        $("#solution").modal('show');
      });
    }
  }
}

function checkDivAns(problemNumber) {
  if ($("#div-ans-"+problemNumber).val() == ""){
    alert("Please type in your answer first.");
  }
  else{
    if ($("#div-btn-"+problemNumber).html() == "Check"){
      if ($("#div-ans-"+problemNumber).val().replace(/\s/g,'').replace(/([a-z])/g, "x") == divProblems[problemNumber].ans[0] || 
          $("#div-ans-"+problemNumber).val().replace(/\s/g,'').replace(/([a-z])/g, "x") == divProblems[problemNumber].ans[1] ||
          $("#div-ans-"+problemNumber).val().replace(/\s/g,'').replace(/([a-z])/g, "x") == divProblems[problemNumber].ans[2]){
        $(document).ready(function(){
          $("#correct").modal('show');
      });
      }
      else{
        $(document).ready(function(){
          $("#incorrect").modal('show');
          $("#correct_answer").html("The correct answer is: " +mulProblems[problemNumber].display_ans[0]);
      });
      }
      $("#div-btn-"+problemNumber).html("Solution");
      $("#div-ans-"+problemNumber).css('color', 'gray');
      $("#div-ans-"+problemNumber).attr("disabled", "");
    }
    else{
      $(document).ready(function(){
        $("#solution").modal('show');
      });
    }
  }
}


let addProblems = {
  '0':{
    'given': '4 more than 11',
    'ans': ['11+4'],
    'display_ans': ['11 + 4']
  },
  '1':{
    'given': '3 plus the sum of 9 and x',
    'ans': ['3+9+x', '3+(9+x)'],
    'display_ans': ['3 + (9 + x)']
  },
  '2':{
    'given': 'A number added to 16',
    'ans': ['16+x'],
    'display_ans': ['16 + x']
  },
  '3':{
    'given': 'Total of 17 and 5x',
    'ans': ['17+5x', '5x+17'],
    'display_ans': ['17 + 5x']
  },
  '4':{
    'given': 'The sum of 6 and x increased by 2',
    'ans': ['6+x+2', '(6+x)+2'],
    'display_ans': ['(6 + x) + 2']
  }
}

let subProblems = {
  '0':{
    'given': '12 less than 19	',
    'ans': ['19-12'],
    'display_ans': ['19 -12']
  },
  '1':{
    'given': '3 minus the difference of 2 and 4',
    'ans': ['3-2-4', '3-(2-4)'],
    'display_ans': ['3 - (2 - 4)']
  },
  '2':{
    'given': '13 subtracted by 6',
    'ans': ['13-6'],
    'display_ans': ['13 - 6']
  },
  '3':{
    'given': '13 subtracted from 6',
    'ans': ['6-13'],
    'display_ans': ['6 - 13']
  },
  '4':{
    'given': 'The difference of 5x and y decreased by 8',
    'ans': ['5x-y-8', '(5x-y)-8', '5x-(y-8)'],
    'display_ans': ['(5x - y) - 8']
  }
}

let mulProblems = {
  '0':{
    'given': '4 multiplied by 7',
    'ans': ['4*7'],
    'display_ans': ['4 * 7']
  },
  '1':{
    'given': '2 times the product of 4 and 4',
    'ans': ['2*4*4', '2*(4*4)'],
    'display_ans': ['2 * (4 * 4)']
  },
  '2':{
    'given': 'Twice a number',
    'ans': ['2x', '2*x'],
    'display_ans': ['2 * x']
  },
  '3':{
    'given': 'Thrice 5x',
    'ans': ['3*5x'],
    'display_ans': ['3 * 5x']
  },
  '4':{
    'given': 'The product of 6 and a number',
    'ans': ['6*x', '6x'],
    'display_ans': ['6 * x']
  }
}

let divProblems = {
  '0':{
    'given': '2 divided by x	',
    'ans': ['2/x'],
    'display_ans': ['2 / x']
  },
  '1':{
    'given': 'The quotient of x and 14 divided by 3',
    'ans': ['x/4/3', '(x/14)/3', 'x/(14/3)'],
    'display_ans': ['(x / 14) / 3']
  },
  '2':{
    'given': 'The ratio of 6 and 18',
    'ans': ['6/18'],
    'display_ans': ['6 / 18']
  },
  '3':{
    'given': 'One-third of a number',
    'ans': ['1/3x', '(1/3)*x'],
    'display_ans': ['1/3x']
  },
  '4':{
    'given': 'One-half of a number divided by 9',
    'ans': ['1/2x/9', '(1/2x)/9', '((1/2)*x)/9'],
    'display_ans': ['(1/2x) / 9']
  }
}


addHTML = "";
subHTML = "";
mulHTML = "";
divHTML = "";
problemCount = (Object.keys(addProblems).length) - 1

for (let i = 0; i <= problemCount; i++){
  addHTML += `<tr>`;
  addHTML += `<td scope="row">`+addProblems[i].given+`</td>`;
  addHTML += `<td scope="row"><input type="text" id="add-ans-`+i+`" class="form-label"></td>`;
  addHTML += `<td class="text-center"><a id="add-btn-`+i+`" class="btn btn-outline-primary answer" onclick="checkAddAns(`+i+`)">Check</a></td>`;
  addHTML += `</tr>`;
}

for (let i = 0; i <= problemCount; i++){
  subHTML += `<tr>`;
  subHTML += `<td scope="row">`+subProblems[i].given+`</td>`;
  subHTML += `<td scope="row"><input type="text" id="sub-ans-`+i+`" class="form-label"></td>`;
  subHTML += `<td class="text-center"><a id="sub-btn-`+i+`" class="btn btn-outline-primary answer" onclick="checkSubAns(`+i+`)">Check</a></td>`;
  subHTML += `</tr>`;
}

for (let i = 0; i <= problemCount; i++){
  mulHTML += `<tr>`;
  mulHTML += `<td scope="row">`+mulProblems[i].given+`</td>`;
  mulHTML += `<td scope="row"><input type="text" id="mul-ans-`+i+`" class="form-label"></td>`;
  mulHTML += `<td class="text-center"><a id="mul-btn-`+i+`" class="btn btn-outline-primary answer" onclick="checkMulAns(`+i+`)">Check</a></td>`;
  mulHTML += `</tr>`;
}

for (let i = 0; i <= problemCount; i++){
  divHTML += `<tr>`;
  divHTML += `<td scope="row">`+divProblems[i].given+`</td>`;
  divHTML += `<td scope="row"><input type="text" id="div-ans-`+i+`" class="form-label"></td>`;
  divHTML += `<td class="text-center"><a id="div-btn-`+i+`" class="btn btn-outline-primary answer" onclick="checkDivAns(`+i+`)">Check</a></td>`;
  divHTML += `</tr>`;
}

$("#addProblems").html(addHTML);
$("#subProblems").html(subHTML);
$("#mulProblems").html(mulHTML);
$("#divProblems").html(divHTML);

// Input enter = Check
for (let i = 0; i <= problemCount; i++){
document.getElementById("add-ans-"+i).addEventListener("keypress", function(event) {
  if (event.key === "Enter") {
    event.preventDefault();
    document.getElementById("add-btn-"+i).click();
  }
});
}

for (let i = 0; i <= problemCount; i++){
document.getElementById("sub-ans-"+i).addEventListener("keypress", function(event) {
  if (event.key === "Enter") {
    event.preventDefault();
    document.getElementById("sub-btn-"+i).click();
  }
});
}

for (let i = 0; i <= problemCount; i++){
document.getElementById("mul-ans-"+i).addEventListener("keypress", function(event) {
  if (event.key === "Enter") {
    event.preventDefault();
    document.getElementById("mul-btn-"+i).click();
  }
});
}

for (let i = 0; i <= problemCount; i++){
document.getElementById("div-ans-"+i).addEventListener("keypress", function(event) {
  if (event.key === "Enter") {
    event.preventDefault();
    document.getElementById("div-btn-"+i).click();
  }
});
}


</script>

{% endblock %}